<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Question fo You</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Comic Neue', cursive;
            background: #8B4C9F;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        .intro-section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            z-index: 10;
            padding: 40px 20px;
        }

        h1 {
            font-family: 'Fredoka One', cursive;
            color: #ff1493;
            font-size: 4rem;
            margin-bottom: 2rem;
            text-shadow: 2px 2px 4px rgba(255, 20, 147, 0.3);
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s ease forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .intro-section p {
            font-size: 1.8rem;
            color: #ff69b4;
            opacity: 0.9;
            margin-top: 1rem;
            opacity: 0;
            animation: fadeInUp 1s ease 0.3s forwards;
        }

        .timeline-section {
            position: relative;
            min-height: 700vh;
            padding: 100px 0;
            width: 100%;
        }

        .svg-container {
            position: relative;
            width: 100%;
            height: 700vh;
            overflow: visible;
        }

        .timeline-svg {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }

        .wavy-line {
            fill: none;
            stroke: #ff69b4;
            stroke-width: 8;
            stroke-linecap: round;
            stroke-linejoin: round;
            filter: drop-shadow(0 0 10px rgba(255, 105, 180, 0.5));
        }

        .timeline-point {
            position: absolute;
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.6s ease;
            z-index: 10;
        }

        .timeline-point.visible {
            opacity: 1;
            transform: scale(1);
        }

        .timeline-content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            max-width: 300px;
            text-align: center;
        }

        .timeline-content.visible {
            transform: translateX(0);
        }

        .timeline-image {
            width: 100%;
            max-width: 250px;
            height: auto;
            border-radius: 15px;
            margin-bottom: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        .timeline-year {
            font-size: 18px;
            font-weight: 600;
            color: #ff69b4;
            text-align: center;
            margin-top: 5px;
            margin-bottom: 0;
            font-family: 'Comic Neue', cursive;
        }

        .timeline-text {
            font-family: 'Comic Neue', cursive;
            color: #8B4C9F;
            font-size: 1.2rem;
            font-weight: 700;
            line-height: 1.4;
        }

        .point-marker {
            display: none;
        }

        @keyframes pulse {
            0%, 100% {
                transform: translate(-50%, -50%) scale(1);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2);
            }
        }

        .final-section {
            min-height: 100vh;
            position: relative;
            width: 100%;
            z-index: 10;
            padding: 40px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .final-section h1 {
            font-family: 'Fredoka One', cursive;
            color: #ff69b4;
            position: relative;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(255, 105, 180, 0.3);
            font-weight: normal;
            letter-spacing: 2px;
            text-align: center;
            width: 90%;
            max-width: 2000px;
            z-index: 20;
            opacity: 0;
            transition: all 0.8s ease;
            padding: 0 100px;
            margin-bottom: 60px;
        }

        .final-section h1.visible {
            opacity: 1;
        }

        .button-container {
            position: relative;
            width: 100%;
            height: auto;
            margin-top: 0;
            display: flex;
            justify-content: center;
            gap: 60px;
            flex-wrap: wrap;
            overflow: visible;
        }

        .btn {
            padding: 20px 80px;
            font-size: 2.5em;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            z-index: 10;
            font-family: 'Comic Neue', cursive;
            letter-spacing: 1px;
            position: relative;
        }
        
        .btn.magnetic-active {
            position: fixed;
        }

        .btn-yes {
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 50%, #ffb3d1 100%);
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            transform-origin: center center;
        }

        .btn-yes:hover {
            transform: scale(1.6) !important;
            box-shadow: 0 15px 40px rgba(255, 107, 157, 0.6);
        }

        .btn-no {
            background: linear-gradient(135deg, #c9c9c9 0%, #e0e0e0 100%);
            color: #666;
            transition: all 0.3s ease;
        }

        .btn-no:hover {
            transform: scale(1.05);
        }

        /* Floating hearts animation */
        .heart-emoji {
            position: fixed;
            font-size: 24px;
            color: rgba(255, 105, 180, 0.5);
            animation: float 20s infinite;
            pointer-events: none;
            z-index: 1;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Scroll indicator */
        .scroll-indicator {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: #ff69b4;
            font-size: 1.2rem;
            opacity: 0.7;
            animation: bounce 2s infinite;
            z-index: 100;
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateX(-50%) translateY(0);
            }
            50% {
                transform: translateX(-50%) translateY(-10px);
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }

            .timeline-content {
                max-width: 250px;
                padding: 15px;
            }

            .timeline-text {
                font-size: 1rem;
            }

            .timeline-content.left {
                transform: translateX(0);
                margin-right: 0;
            }

            .timeline-content.right {
                transform: translateX(0);
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Floating hearts -->
    <div class="heart-emoji" style="left: 10%; animation-delay: 0s;">‚ù§Ô∏è</div>
    <div class="heart-emoji" style="left: 20%; animation-delay: 2s;">üíï</div>
    <div class="heart-emoji" style="left: 30%; animation-delay: 4s;">üíñ</div>
    <div class="heart-emoji" style="left: 40%; animation-delay: 1s;">üíó</div>
    <div class="heart-emoji" style="left: 50%; animation-delay: 3s;">‚ù§Ô∏è</div>
    <div class="heart-emoji" style="left: 60%; animation-delay: 5s;">üíï</div>
    <div class="heart-emoji" style="left: 70%; animation-delay: 2.5s;">üíñ</div>
    <div class="heart-emoji" style="left: 80%; animation-delay: 4.5s;">üíó</div>
    <div class="heart-emoji" style="left: 90%; animation-delay: 1.5s;">‚ù§Ô∏è</div>

    <!-- Scroll indicator -->
    <div class="scroll-indicator">Scroll down ‚Üì</div>

    <!-- Intro Section -->
    <section class="intro-section">
        <div>
            <h1></h1>
            <p>Heyyyyy Kristin, sorry this was so late it took me a bit longer than i thought to code it but here it is</p>
        </div>
    </section>

    <!-- Timeline Section -->
    <section class="timeline-section" id="timeline-section">
        <div class="svg-container">
            <svg class="timeline-svg" viewBox="0 0 1200 7000" preserveAspectRatio="xMidYMin meet">
                <defs>
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                        <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>
                
                <!-- Wavy line path - much longer, extending further left and right, smooth curves -->
                <path id="wavy-line-path" 
                      class="wavy-line"
                      d="M 50 100
                         Q 50 100, 200 300
                         Q 350 450, 1000 400
                         Q 1150 350, 1100 600
                         Q 1050 850, 200 1000
                         Q 50 1100, 100 1400
                         Q 150 1700, 1100 1800
                         Q 1150 1850, 1100 2200
                         Q 1050 2550, 200 2600
                         Q 50 2650, 100 3000
                         Q 150 3350, 1100 3200
                         Q 1150 3150, 1100 3400
                         Q 1050 3750, 200 3800
                         Q 50 3850, 100 4200
                         Q 150 4550, 1100 4600
                         Q 1150 4650, 1100 4800
                         Q 1050 5150, 200 5200
                         Q 50 5250, 100 5600
                         Q 150 5950, 1100 6000
                         Q 1150 6050, 1100 6400
                         Q 1050 6750, 200 6800
                         Q 50 6850, 100 6900"
                      fill="none"
                      stroke="#ff69b4"
                      stroke-width="8"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      filter="url(#glow)"/>
            </svg>
        </div>

        <!-- Timeline Points - positioned dynamically on the line -->
        <!-- Point 1 -->
        <div class="timeline-point" id="point-1">
            <div class="point-marker"></div>
            <div class="timeline-content">
                <img src="pictures/IMG_8255.jpg" alt="Memory 1" class="timeline-image">
                <p class="timeline-year"></p>
            </div>
        </div>

        <!-- Point 2 -->
        <div class="timeline-point" id="point-2">
            <div class="point-marker"></div>
            <div class="timeline-content">
                <img src="pictures/IMG_3620.JPEG" alt="Memory 2" class="timeline-image">
                <p class="timeline-year"></p>
            </div>
        </div>

        <!-- Point 3 -->
        <div class="timeline-point" id="point-3">
            <div class="point-marker"></div>
            <div class="timeline-content">
                <img src="pictures/IMG_8483.jpeg" alt="Memory 3" class="timeline-image">
                <p class="timeline-year"></p>
            </div>
        </div>

        <!-- Point 4 -->
        <div class="timeline-point" id="point-4">
            <div class="point-marker"></div>
            <div class="timeline-content">
                <img src="pictures/IMG_8635.JPG" alt="Memory 4" class="timeline-image">
                <p class="timeline-year"></p>
            </div>
        </div>

        <!-- Point 5 -->
        <div class="timeline-point" id="point-5">
            <div class="point-marker"></div>
            <div class="timeline-content">
                <img src="pictures/IMG_9472.JPG" alt="Memory 5" class="timeline-image">
                <p class="timeline-year"></p>
            </div>
        </div>

        <!-- Point 6 -->
        <div class="timeline-point" id="point-6">
            <div class="point-marker"></div>
            <div class="timeline-content">
                <img src="pictures/IMG_9526.jpeg" alt="Memory 6" class="timeline-image">
                <p class="timeline-year"></p>
            </div>
        </div>

        <!-- Point 7 -->
        <div class="timeline-point" id="point-7">
            <div class="point-marker"></div>
            <div class="timeline-content">
                <img src="pictures/34180013.jpeg" alt="Memory 7" class="timeline-image">
                <p class="timeline-year"></p>
            </div>
        </div>

        <!-- Point 8 -->
        <div class="timeline-point" id="point-8">
            <div class="point-marker"></div>
            <div class="timeline-content">
                <img src="pictures/IMG_2738.jpeg" alt="Memory 8" class="timeline-image">
                <p class="timeline-year"></p>
            </div>
        </div>

        <!-- Point 9 -->
        <div class="timeline-point" id="point-9">
            <div class="point-marker"></div>
            <div class="timeline-content">
                <img src="pictures/IMG_3065.jpeg" alt="Memory 9" class="timeline-image">
                <p class="timeline-year"></p>
            </div>
        </div>

        <!-- Point 10 -->
        <div class="timeline-point" id="point-10">
            <div class="point-marker"></div>
            <div class="timeline-content">
                <img src="pictures/IMG_0881.JPG" alt="Memory 10" class="timeline-image">
                <p class="timeline-year"></p>
            </div>
        </div>

        <!-- Point 11 -->
        <div class="timeline-point" id="point-11">
            <div class="point-marker"></div>
            <div class="timeline-content">
                <img src="pictures/IMG_8950.jpeg" alt="Memory 11" class="timeline-image">
                <p class="timeline-year"></p>
            </div>
        </div>

        <!-- Point 12 -->
        <div class="timeline-point" id="point-12">
            <div class="point-marker"></div>
            <div class="timeline-content">
                <img src="pictures/IMG_1636.jpeg" alt="Memory 12" class="timeline-image">
                <p class="timeline-year"></p>
            </div>
        </div>

        <!-- Point 13 -->
        <div class="timeline-point" id="point-13">
            <div class="point-marker"></div>
            <div class="timeline-content">
                <img src="pictures/IMG_5277.JPG" alt="Memory 13" class="timeline-image">
                <p class="timeline-year"></p>
            </div>
        </div>

        <!-- Point 14 -->
        <div class="timeline-point" id="point-14">
            <div class="point-marker"></div>
            <div class="timeline-content">
                <img src="pictures/IMG_0609.jpeg" alt="Memory 14" class="timeline-image">
                <p class="timeline-year"></p>
            </div>
        </div>

        <!-- Point 15 -->
        <div class="timeline-point" id="point-15">
            <div class="point-marker"></div>
            <div class="timeline-content">
                <img src="pictures/IMG_1467.jpeg" alt="Memory 15" class="timeline-image">
                <p class="timeline-year"></p>
            </div>
        </div>

        <!-- Point 16 -->
        <div class="timeline-point" id="point-16">
            <div class="point-marker"></div>
            <div class="timeline-content">
                <img src="pictures/IMG_2436.jpeg" alt="Memory 16" class="timeline-image">
                <p class="timeline-year"></p>
            </div>
        </div>

        <!-- Point 17 -->
        <div class="timeline-point" id="point-17">
            <div class="point-marker"></div>
            <div class="timeline-content">
                <img src="pictures/IMG_0925.JPG" alt="Memory 17" class="timeline-image">
                <p class="timeline-year"></p>
            </div>
        </div>

        <!-- Point 18 -->
        <div class="timeline-point" id="point-18">
            <div class="point-marker"></div>
            <div class="timeline-content">
                <img src="pictures/IMG_4994.JPG" alt="Memory 18" class="timeline-image">
                <p class="timeline-year"></p>
            </div>
        </div>

        <!-- Point 19 -->
        <div class="timeline-point" id="point-19">
            <div class="point-marker"></div>
            <div class="timeline-content">
                <img src="pictures/IMG_6789.JPG" alt="Memory 19" class="timeline-image">
                <p class="timeline-year"></p>
            </div>
        </div>
    </section>

    <!-- Final Section -->
    <section class="final-section" id="final-section">
        <h1 id="final-title">So I've been thinking. We've been a pretty good team all these years and I really like you and think you're pretty great, would you like to be my valentine? üíï</h1>
        
        <div class="button-container" id="buttonContainer">
            <button class="btn btn-yes" id="magneticYes" onclick="handleYesClick()">Yes</button>
            <button class="btn btn-no" id="fleeingNo" onclick="handleNoClick()">No</button>
        </div>
    </section>

    <script>
        // Get elements
        let wavyLinePath = null;
        let timelineSection = null;
        let pathLength = 0;
        const timelinePoints = document.querySelectorAll('.timeline-point');
        const finalTitle = document.getElementById('final-title');
        const scrollIndicator = document.querySelector('.scroll-indicator');

        // Initialize elements
        function initializeElements() {
            wavyLinePath = document.getElementById('wavy-line-path');
            timelineSection = document.getElementById('timeline-section');
            
            if (wavyLinePath && timelineSection) {
                // Calculate path length
                pathLength = wavyLinePath.getTotalLength();

                // Set initial dash array and offset
                wavyLinePath.style.strokeDasharray = pathLength;
                wavyLinePath.style.strokeDashoffset = pathLength;
            }
        }
        
        // Initialize on load
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeElements);
        } else {
            initializeElements();
        }

        // Timeline point positions using absolute pixel coordinates
        // x: horizontal position in pixels (relative to timeline section)
        // y: vertical position in pixels (relative to timeline section)
        // offsetX: horizontal offset in pixels (negative = left, positive = right)
        // year: year label to display under the photo
        const pointPositions = [
            { x: 100, y: -700, id: 'point-1', offsetX: 40, year: '2020' },
            { x: 1000, y: -500, id: 'point-2', offsetX: -400, year: '2020' },
            { x: 850, y: -450, id: 'point-3', offsetX: 150, year: '2020' },
            { x: 500, y: -5, id: 'point-4', offsetX: -150, year: '2021' },
            { x: 250, y: 400, id: 'point-5', offsetX: 150, year: '2021' },
            { x: 1100, y: 500, id: 'point-6', offsetX: -150, year: '2021' },
            { x: 650, y: 1000, id: 'point-7', offsetX: 150, year: '2022' },
            { x: 150, y: 900, id: 'point-8', offsetX: 150, year: '2022' },
            { x: 200, y: 1600, id: 'point-9', offsetX: 150, year: '2022' },
            { x: 1100, y: 1600, id: 'point-10', offsetX: -150, year: '2022' },
            { x: 200, y: 2000, id: 'point-11', offsetX: 150, year: '2023' },
            { x: 600, y: 2500, id: 'point-12', offsetX: -150, year: '2024' },
            { x: 900, y: 2600, id: 'point-13', offsetX: 150, year: '2024' },
            { x: 850, y: 3000, id: 'point-14', offsetX: -150, year: '2025' },
            { x: 150, y: 3100, id: 'point-15', offsetX: 150, year: '2024' },
            { x: 700, y: 3500, id: 'point-16', offsetX: -150, year: '2025' },
            { x: 900, y: 3600, id: 'point-17', offsetX: 150, year: '2025' },
            { x: 1000, y: 3900, id: 'point-18', offsetX: -150, year: '2025' },
            { x: 100, y: 4100, id: 'point-19', offsetX: 150, year: '2025' }
        ];

        // Position points using absolute pixel coordinates (not relative to line)
        function positionPointsOnLine() {
            const timelineSection = document.getElementById('timeline-section');
            
            if (!timelineSection) return;
            
            const sectionRect = timelineSection.getBoundingClientRect();
            const sectionTop = timelineSection.offsetTop;
            
            pointPositions.forEach((point) => {
                const pointElement = document.getElementById(point.id);
                if (!pointElement) return;
                
                // Position using absolute pixel coordinates relative to timeline section
                pointElement.style.left = point.x + 'px';
                pointElement.style.top = (sectionTop + point.y) + 'px';
                
                // Apply horizontal offset to timeline content
                const content = pointElement.querySelector('.timeline-content');
                if (content && point.offsetX !== undefined) {
                    content.style.transform = `translateX(${point.offsetX}px)`;
                }
                
                // Set year text
                const yearElement = pointElement.querySelector('.timeline-year');
                if (yearElement && point.year) {
                    yearElement.textContent = point.year;
                }
            });
        }

        // Position points when page loads and on resize
        function initializePoints() {
            initializeElements();
            positionPointsOnLine();
            updateTimeline();
        }
        
        window.addEventListener('load', initializePoints);
        window.addEventListener('resize', () => {
            positionPointsOnLine();
            updateTimeline();
        });
        
        // Initial positioning after a short delay to ensure SVG is rendered
        setTimeout(initializePoints, 200);

        // Scroll animation function
        function updateTimeline() {
            if (!wavyLinePath || !timelineSection || pathLength === 0) {
                initializeElements();
                if (!wavyLinePath || !timelineSection || pathLength === 0) {
                    return; // Still not initialized, skip this update
                }
            }
            
            const windowHeight = window.innerHeight;
            const sectionTop = timelineSection.offsetTop;
            const sectionHeight = timelineSection.offsetHeight;
            const scrollPosition = window.pageYOffset;
            
            // Calculate scroll progress through the timeline section
            // Make animation slower by requiring more scroll distance
            const scrollStart = sectionTop - windowHeight;
            const scrollEnd = sectionTop + sectionHeight - windowHeight;
            const totalScrollDistance = scrollEnd - scrollStart;
            const currentScroll = scrollPosition - scrollStart;
            
            // Slow down the animation by multiplying the required scroll distance (2x slower)
            const slowDownFactor = 1.1;
            let progress = Math.max(0, Math.min(1, currentScroll / (totalScrollDistance * slowDownFactor)));
            
            // Draw the line as you scroll
            if (wavyLinePath && pathLength > 0) {
                const lineOffset = pathLength * (1 - progress);
                wavyLinePath.style.strokeDashoffset = lineOffset;
            }

            // Show timeline points as you scroll (based on scroll position)
            if (timelineSection) {
                const sectionTop = timelineSection.offsetTop;
                const windowHeight = window.innerHeight;
                
                pointPositions.forEach((point, index) => {
                    const pointElement = document.getElementById(point.id);
                    if (!pointElement) return;
                    
                    const content = pointElement.querySelector('.timeline-content');
                    
                    // Show point when scroll position reaches near its y coordinate
                    const pointY = sectionTop + point.y;
                    const scrollThreshold = scrollPosition + windowHeight;
                    
                    if (scrollThreshold > pointY - 200) {
                        pointElement.classList.add('visible');
                        if (content) {
                            content.classList.add('visible');
                            // Apply offset when content becomes visible
                            if (point.offsetX !== undefined) {
                                content.style.transform = `translateX(${point.offsetX}px)`;
                            }
                        }
                    }
                });
            }

            // Hide scroll indicator when scrolling starts
            if (scrollPosition > 100) {
                scrollIndicator.style.opacity = '0';
                scrollIndicator.style.transition = 'opacity 0.5s ease';
            } else {
                scrollIndicator.style.opacity = '0.7';
            }

            // Show final section when timeline is mostly complete
            const finalSection = document.getElementById('final-section');
            if (finalSection) {
                const finalSectionTop = finalSection.offsetTop;
                const finalSectionVisible = scrollPosition + windowHeight > finalSectionTop - 200;
                if (finalSectionVisible) {
                    finalTitle.classList.add('visible');
                }
            }
        }

        // Throttle scroll events
        let ticking = false;
        function requestTick() {
            if (!ticking) {
                window.requestAnimationFrame(() => {
                    updateTimeline();
                    ticking = false;
                });
                ticking = true;
            }
        }

        window.addEventListener('scroll', requestTick);
    </script>

    <script>
        // Get button elements
        const magneticYes = document.getElementById('magneticYes');
        const fleeingNo = document.getElementById('fleeingNo');
        const buttonContainer = document.getElementById('buttonContainer');

        // Set initial positions for buttons (for magnetic effect) when final section is visible
        function initializeButtons() {
            if (!magneticYes || !fleeingNo) return;
            
            // Buttons are now positioned with CSS flexbox, but we need to set initial positions for magnetic effect
            const yesButtonRect = magneticYes.getBoundingClientRect();
            const noButtonRect = fleeingNo.getBoundingClientRect();
            
            // Store initial positions for magnetic effect
            magneticYes.dataset.initialX = magneticYes.offsetLeft;
            magneticYes.dataset.initialY = magneticYes.offsetTop;
            
            fleeingNo.dataset.initialX = fleeingNo.offsetLeft;
            fleeingNo.dataset.initialY = fleeingNo.offsetTop;
        }

        // Track if final section is visible
        let isFinalSectionVisible = false;
        
        // Initialize buttons when final section becomes visible
        const finalSection = document.getElementById('final-section');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                isFinalSectionVisible = entry.isIntersecting;
                if (entry.isIntersecting) {
                    setTimeout(initializeButtons, 100);
                }
            });
        }, { threshold: 0.1 });
        
        if (finalSection) {
            observer.observe(finalSection);
        }

        // Magnetic Yes Button - follows mouse anywhere on the page (only when question is in view)
        document.addEventListener('mousemove', function(e) {
            if (!magneticYes || !isFinalSectionVisible || !finalSection) return;
            
            // Switch to fixed positioning for magnetic effect (prevents page expansion)
            if (!magneticYes.classList.contains('magnetic-active')) {
                const rect = magneticYes.getBoundingClientRect();
                magneticYes.classList.add('magnetic-active');
                magneticYes.style.position = 'fixed';
                magneticYes.style.left = rect.left + 'px';
                magneticYes.style.top = rect.top + 'px';
            }
            
            const mouseX = e.clientX;
            const mouseY = e.clientY;
            
            const buttonRect = magneticYes.getBoundingClientRect();
            const currentX = buttonRect.left;
            const currentY = buttonRect.top;
            
            // Calculate target position (mouse position minus half button size to center it)
            const buttonWidth = buttonRect.width;
            const buttonHeight = buttonRect.height;
            const targetX = mouseX - buttonWidth / 2;
            const targetY = mouseY - buttonHeight / 2;
            
            // Smooth interpolation for magnetic effect (faster movement)
            const newX = currentX + (targetX - currentX) * 0.7;
            const newY = currentY + (targetY - currentY) * 0.7;
            
            // Keep button within final section bounds and below the timeline line
            const sectionRect = finalSection.getBoundingClientRect();
            const timelineSection = document.getElementById('timeline-section');
            const timelineRect = timelineSection ? timelineSection.getBoundingClientRect() : null;
            
            const minX = sectionRect.left;
            // Ensure button stays below the timeline line (bottom of timeline section)
            const minY = timelineRect ? timelineRect.bottom : sectionRect.top;
            const maxX = sectionRect.right - buttonWidth;
            const maxY = sectionRect.bottom - buttonHeight;
            
            const clampedX = Math.max(minX, Math.min(newX, maxX));
            const clampedY = Math.max(minY, Math.min(newY, maxY));
            
            magneticYes.style.left = clampedX + 'px';
            magneticYes.style.top = clampedY + 'px';
        });

        // Fleeing No Button - runs away when mouse approaches (only when question is in view)
        if (fleeingNo) {
            fleeingNo.addEventListener('mouseenter', function(e) {
                if (!isFinalSectionVisible || !finalSection) return;
                
                // Switch to fixed positioning to prevent page expansion
                if (!this.classList.contains('magnetic-active')) {
                    const rect = this.getBoundingClientRect();
                    this.classList.add('magnetic-active');
                    this.style.position = 'fixed';
                    this.style.left = rect.left + 'px';
                    this.style.top = rect.top + 'px';
                }
                
                const noButtonRect = this.getBoundingClientRect();
                const sectionRect = finalSection.getBoundingClientRect();
                const timelineSection = document.getElementById('timeline-section');
                const timelineRect = timelineSection ? timelineSection.getBoundingClientRect() : null;
                
                // Calculate random position within final section bounds, below the timeline line
                const minX = sectionRect.left;
                // Ensure button stays below the timeline line (bottom of timeline section)
                const minY = timelineRect ? timelineRect.bottom : sectionRect.top;
                const maxX = sectionRect.right - noButtonRect.width;
                const maxY = sectionRect.bottom - noButtonRect.height;
                
                const safeMaxX = Math.max(minX, maxX);
                const safeMaxY = Math.max(minY, maxY);
                
                const newX = minX + Math.random() * (safeMaxX - minX);
                const newY = minY + Math.random() * (safeMaxY - minY);
                
                this.style.left = newX + 'px';
                this.style.top = newY + 'px';
                this.style.transform = 'translate(0, 0)';
            });

            // Also make it flee when mouse gets close (using mousemove for proximity detection)
            let fleeingTimeout;
            document.addEventListener('mousemove', function(e) {
                if (!fleeingNo || !isFinalSectionVisible) return;
                
                // Switch to fixed positioning if not already
                if (!fleeingNo.classList.contains('magnetic-active')) {
                    const rect = fleeingNo.getBoundingClientRect();
                    fleeingNo.classList.add('magnetic-active');
                    fleeingNo.style.position = 'fixed';
                    fleeingNo.style.left = rect.left + 'px';
                    fleeingNo.style.top = rect.top + 'px';
                }
                
                const noButtonRect = fleeingNo.getBoundingClientRect();
                const mouseX = e.clientX;
                const mouseY = e.clientY;
                
                // Calculate distance from mouse to button center
                const buttonCenterX = noButtonRect.left + noButtonRect.width / 2;
                const buttonCenterY = noButtonRect.top + noButtonRect.height / 2;
                const distance = Math.sqrt(
                    Math.pow(mouseX - buttonCenterX, 2) + 
                    Math.pow(mouseY - buttonCenterY, 2)
                );
                
                // If mouse is within 100px of the button, make it flee
                if (distance < 100 && distance > 0 && finalSection) {
                    clearTimeout(fleeingTimeout);
                    fleeingTimeout = setTimeout(() => {
                        const sectionRect = finalSection.getBoundingClientRect();
                        const timelineSection = document.getElementById('timeline-section');
                        const timelineRect = timelineSection ? timelineSection.getBoundingClientRect() : null;
                        
                        const minX = sectionRect.left;
                        // Ensure button stays below the timeline line (bottom of timeline section)
                        const minY = timelineRect ? timelineRect.bottom : sectionRect.top;
                        const maxX = sectionRect.right - noButtonRect.width;
                        const maxY = sectionRect.bottom - noButtonRect.height;
                        
                        const safeMaxX = Math.max(minX, maxX);
                        const safeMaxY = Math.max(minY, maxY);
                        
                        const newX = minX + Math.random() * (safeMaxX - minX);
                        const newY = minY + Math.random() * (safeMaxY - minY);
                        
                        fleeingNo.style.left = newX + 'px';
                        fleeingNo.style.top = newY + 'px';
                        fleeingNo.style.transform = 'translate(0, 0)';
                    }, 50);
                }
            });
        }

        // Handle button clicks
        function handleYesClick() {
            alert('YAAAAAYYYYYYYYY THANKS BAE, SEE U SOON');
        }

        function handleNoClick(e) {
            if (e) {
                e.preventDefault();
                e.stopPropagation();
            }
            alert('ha, wrong answer try again');
            return false;
        }

        // Prevent clicking on No button
        if (fleeingNo) {
            fleeingNo.addEventListener('click', handleNoClick);
        }
    </script>
</body>
</html>
